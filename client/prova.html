<!DOCTYPE html>
<head>
    <script>
        var counter, ws
        var go_vitaletti_go = true
        function start_ws(){
            counter = 0
            ws = new WebSocket("ws://localhost:3000/")

            ws.onmessage = (event) => {
                if(counter >= 10){
                    esegui()
                }
                else{
                    document.getElementById('RGB_Button').style.backgroundColor = JSON.parse(event.data).color
                    counter++
                }
            }
        }
        function esegui(){
            if(go_vitaletti_go === true){
                counter = 0
                ws.send(JSON.stringify({ok: true}))
                go_vitaletti_go = false
            }
            else{
                ws.send(JSON.stringify({ok: false}))
                go_vitaletti_go = true
            }
        }
    </script>
    <title>Web socket page</title>
</head>
<body onload="start_ws()">
    <p>Click here to change button's color</p>
    <button id="RGB_Button" style="background-color: blue;" onclick="esegui()">Multicolor Button</button>
    <div id="chat_div" style="border: 5px solid; width: 400px; height: 400px;background-color: blue;position: absolute; top: 5%; right: 5px; border-radius: 5%;">
        <p style="position:relative; text-align: center; font-size: 30px;font-weight: bold; margin-top: 0;">CHAT</p>
        <textarea style="position: absolute;;width: 95%; margin-left: 2%; border: 2px thin; bottom: 2px; resize: unset;"></textarea>
    </div>
</body>
